---
title: "Easy Task"
author: "Sanat Kumar Gupta"
output: html_document
date: "2025-03-17"
---
```{r}
# Load the package
library(swephR)
library(lubridate)
library(dplyr)
```
## Load a Naturally Occurring Time Series
used **historical date data** as an example time series.
```{r}
date_data <- data.frame(
  datetime = seq(ymd_hms("2025-01-01 00:00:00"), by = "1 day", length.out = 10)
)
head(date_data)
```
## Calculate Tithi, Vaara, and Nakshatra
We define functions to compute these parameters using **Swiss Ephemeris**.

### Compute Vaara (Day of the Week)
```{r}
compute_vaara <- function(datetime) {
  weekdays(datetime)
}
date_data$vaara <- sapply(date_data$datetime, compute_vaara)
```

### Compute Tithi (Lunar Day)
```{r}
compute_tithi <- function(datetime) {
  jd <- swe_julday(year(datetime), month(datetime), day(datetime), hour(datetime), SE$GREG_CAL)
  sun_long <- swe_calc_ut(jd, SE$SUN, SE$FLG_SWIEPH)$xx[1]
  moon_long <- swe_calc_ut(jd, SE$MOON, SE$FLG_SWIEPH)$xx[1]
  tithi <- floor(((moon_long - sun_long) %% 360) / 12) + 1
  return(tithi)
}
date_data$tithi <- sapply(date_data$datetime, compute_tithi)
```

### Compute Nakshatra (Lunar Mansion)
```{r}
compute_nakshatra <- function(datetime) {
  jd <- swe_julday(year(datetime), month(datetime), day(datetime), hour(datetime), SE$GREG_CAL)
  moon_long <- swe_calc_ut(jd, SE$MOON, SE$FLG_SWIEPH)$xx[1]
  nakshatra <- floor(moon_long / 13.3333) + 1
  return(nakshatra)
}
date_data$nakshatra <- sapply(date_data$datetime, compute_nakshatra)
```

## Results
```{r}
date_data
```
#### Conclusion
This demonstrates how to calculate **Tithi, Vaara, and Nakshatra** for a naturally occurring time series using Swiss Ephemeris.